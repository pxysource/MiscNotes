# 标准预定义宏
| 宏         | 描述                                                         |
| :--------- | :----------------------------------------------------------- |
| `__LINE__` | 当前程序行的行号，表示为十进制整型常量                       |
| `__FILE__` | 当前源文件名，表示字符串型常量                               |
| `__DATE__` | 转换的日历日期，表示为`Mmm dd yyyy`形式的字符串常量，`Mmm`是由`asctime`产生的 |
| `__TIME__` | 转换的时间，表示`hh:mm:ss`形式的字符串型常量，是由`asctime`产生的。 |

## 待确认

`__STDC__`  编辑器为ISO兼容实现时位十进制整型常量

`__STDC_VERSION__` 如何实现复合C89整部1，则这个宏的值为19940SL；如果实现符合C99，则这个宏的值为199901L；否则数值是未定义

`__STDC_EOBTED__` (C99)实现为宿主实现时为1,实现为独立实现为0

`__STDC_IEC_559__` (C99)浮点数实现复合IBC 60559标准时定义为1，否者数值是未定义

`__STDC_IEC_559_COMPLEX__` (C99)复数运算实现复合IBC 60559标准时定义为1，否者数值是未定义

`__STDC_ISO_10646__` (C99)定义为长整型常量，yyyymmL表示wchar_t值复合ISO 10646标准及其指定年月的修订补充，否则数值未定义

# 宏函数

## 语法

### 无返回值的宏函数

```c
#define XXX() \
	do {\
	} while(0)
```

### 有返回值的宏函数

```c
#define XXX() \
	({\
	int ret = 0;\
    (ret);\
	})
```

## 求两个数的最大值

```c
#define MAX(a, b) ({ \
                     typeof(a) _a = a; \
                     typeof(b) _b = b; \
                     (void)(&_a == &_b);\
                     _a > _b? _a : _b; \
                     })

```

- typeof，获取变量的数据类型
- (void)(&_a == &_b),，这是一条空语句，用于检查a与b的数据类型是否相同（不同类型的指针不能进行比较）

# 使用宏处理软件的版本信息

`macroShowSoftVersion.c`：

```c
#include <stdio.h>

// Software version.
#define XXX_VERSION_MAJOR 1
#define XXX_VERSION_MINOR 2
#define XXX_VERSION_REVSN 3
#define XXX_VERSION_BUILD 10111

// Convert software version to string.
#define XXX_VERSION_LITERAL2(a, b, c, d) #a "." #b "." #c "." #d
#define XXX_VERSION_LITERAL(a, b, c, d)  XXX_VERSION_LITERAL2(a, b, c, d)
#define XXX_VERSION_STRING XXX_VERSION_LITERAL(XXX_VERSION_MAJOR, XXX_VERSION_MINOR, XXX_VERSION_REVSN, XXX_VERSION_BUILD)

int main (void)
{
    printf ("Software Version: %s\n", XXX_VERSION_STRING);

    return 0;
}
```

运行输出：

```powershell
PS D:\Visual Studio Code\C\Macro> .\macroShowSoftVersion.exe
Software Version: 1.2.3.10111
PS D:\Visual Studio Code\C\Macro>
```

